import{r,j as e,L as y}from"./index-C-bofkHd.js";import{g as N}from"./pets-yUH3lGM-.js";import{P as v}from"./PetCard-2FqP7e6o.js";import{C as w,M as P,g as C}from"./mocks-V_Tt4TS1.js";import{c as l,L as k}from"./loader-circle-BwTFM76g.js";const L=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],M=l("chevron-left",L);const S=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],_=l("chevron-right",S);const z=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],E=l("plus",z);const T=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],A=l("search",T);function G(){const[c,i]=r.useState([]),[a,d]=r.useState(1),[n,m]=r.useState(1),[o,u]=r.useState(""),[x,g]=r.useState(!0),[h,p]=r.useState(null),j=async()=>{g(!0),p(null);try{const t=(await N(a,6,o)).data;Array.isArray(t)?(i(t),m(1)):t&&"content"in t&&(i(t.content),m(t.totalPages||1))}catch(s){console.error("Erro ao buscar pets, usando mocks:",s);const t=P.filter(b=>b.nome.toLowerCase().includes(o.toLowerCase())||b.especie.toLowerCase().includes(o.toLowerCase())),f=C(t,a,6);i(f.content),m(f.totalPages),p("Nota: Usando dados locais (servidor indisponível).")}finally{g(!1)}};return r.useEffect(()=>{const s=setTimeout(()=>{j()},300);return()=>clearTimeout(s)},[a,o]),e.jsxs("div",{className:"p-4 max-w-6xl mx-auto",children:[e.jsxs("header",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Pet Manager"}),e.jsx("p",{className:"text-gray-500",children:"Gerencie seus pets e tutores em um só lugar."})]}),e.jsxs("div",{className:"flex gap-2 w-full md:w-auto",children:[e.jsx(y,{to:"/tutor-form",className:"flex-1 md:flex-none bg-white border border-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-50 transition-colors flex items-center justify-center gap-2",children:"Novo Tutor"}),e.jsxs(y,{to:"/pet-form",className:"flex-1 md:flex-none bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center gap-2",children:[e.jsx(E,{size:20})," Novo Pet"]})]})]}),e.jsxs("div",{className:"relative mb-6",children:[e.jsx(A,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:"text",placeholder:"Buscar por nome ou espécie...",value:o,onChange:s=>{u(s.target.value),d(1)},className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 outline-none transition-all shadow-sm"})]}),h&&e.jsxs("div",{className:"bg-amber-50 border border-amber-200 text-amber-700 px-4 py-3 rounded-lg mb-6 flex items-center gap-2",children:[e.jsx(w,{size:20}),e.jsx("span",{className:"text-sm font-medium",children:h})]}),x&&c.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-20",children:[e.jsx(k,{className:"animate-spin text-blue-600 mb-4",size:40}),e.jsx("p",{className:"text-gray-500 font-medium",children:"Buscando pets..."})]}):c.length===0?e.jsxs("div",{className:"text-center py-20 bg-gray-50 rounded-2xl border border-dashed border-gray-300",children:[e.jsx("p",{className:"text-gray-500 text-lg",children:"Nenhum pet encontrado para sua busca."}),e.jsx("button",{onClick:()=>u(""),className:"text-blue-600 font-semibold mt-2 hover:underline",children:"Limpar filtros"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:c.map(s=>e.jsx(v,{pet:s},s.id))}),n>1&&e.jsxs("div",{className:"mt-10 flex justify-center items-center gap-4",children:[e.jsx("button",{onClick:()=>d(s=>Math.max(1,s-1)),disabled:a===1||x,className:"p-2 border rounded-lg disabled:opacity-30 hover:bg-gray-50 transition-colors",children:e.jsx(M,{size:24})}),e.jsxs("span",{className:"font-semibold text-gray-700",children:["Página ",a," de ",n]}),e.jsx("button",{onClick:()=>d(s=>Math.min(n,s+1)),disabled:a===n||x,className:"p-2 border rounded-lg disabled:opacity-30 hover:bg-gray-50 transition-colors",children:e.jsx(_,{size:24})})]})]})]})}export{G as default};
