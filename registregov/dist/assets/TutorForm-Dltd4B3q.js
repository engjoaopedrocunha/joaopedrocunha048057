import{u as h,a as N,r as o,j as e,L as j}from"./index-C-bofkHd.js";import{u as y,S as v}from"./index.esm-oaNbjKZd.js";import{g as w,A as E,u as S,c as T}from"./tutores-Cr8ILfQa.js";import{c as k,L as x}from"./loader-circle-BwTFM76g.js";const C=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],L=k("user",C);function Z(){const{id:r}=h(),i=N(),[n,d]=o.useState(!1),[g,c]=o.useState(!1),[m,l]=o.useState(null),{register:t,handleSubmit:b,reset:u,formState:{errors:s}}=y();o.useEffect(()=>{r&&(c(!0),w(Number(r)).then(a=>{u(a.data)}).catch(a=>{l(a.message||"Erro ao carregar dados do tutor.")}).finally(()=>c(!1)))},[r,u]);const p=async a=>{d(!0),l(null);try{r?await S(Number(r),a):await T(a),i("/")}catch(f){l(f.message||"Erro ao salvar tutor.")}finally{d(!1)}};return g?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(x,{className:"animate-spin mx-auto mb-2"})," Carregando dados..."]}):e.jsxs("div",{className:"p-4 max-w-2xl mx-auto",children:[e.jsxs(j,{to:"/",className:"inline-flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-6",children:[e.jsx(E,{size:20})," Voltar para a lista"]}),e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"p-2 bg-blue-100 text-blue-600 rounded-lg",children:e.jsx(L,{size:24})}),e.jsx("h1",{className:"text-2xl font-bold",children:r?"Editar Tutor":"Cadastrar Novo Tutor"})]}),m&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-6",children:m}),e.jsxs("form",{onSubmit:b(p),className:"space-y-5",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Nome Completo *"}),e.jsx("input",{...t("nome",{required:"Nome é obrigatório"}),className:`w-full border rounded-lg p-2.5 focus:ring-2 focus:ring-blue-500 outline-none ${s.nome?"border-red-500":"border-gray-300"}`,placeholder:"Ex: João Silva"}),s.nome&&e.jsx("p",{className:"text-red-500 text-xs",children:s.nome.message})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Telefone *"}),e.jsx("input",{...t("telefone",{required:"Telefone é obrigatório"}),className:`w-full border rounded-lg p-2.5 focus:ring-2 focus:ring-blue-500 outline-none ${s.telefone?"border-red-500":"border-gray-300"}`,placeholder:"(00) 00000-0000"}),s.telefone&&e.jsx("p",{className:"text-red-500 text-xs",children:s.telefone.message})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"E-mail"}),e.jsx("input",{type:"email",...t("email",{pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"E-mail inválido"}}),className:`w-full border rounded-lg p-2.5 focus:ring-2 focus:ring-blue-500 outline-none ${s.email?"border-red-500":"border-gray-300"}`,placeholder:"joao@exemplo.com"}),s.email&&e.jsx("p",{className:"text-red-500 text-xs",children:s.email.message})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Endereço"}),e.jsx("input",{...t("endereco"),className:"w-full border border-gray-300 rounded-lg p-2.5 focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"Rua, Número, Bairro, Cidade"})]}),e.jsxs("div",{className:"pt-4 flex gap-3",children:[e.jsxs("button",{type:"submit",disabled:n,className:"flex-1 bg-blue-600 text-white font-semibold py-2.5 rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center gap-2 disabled:opacity-50",children:[n?e.jsx(x,{className:"animate-spin",size:20}):e.jsx(v,{size:20}),r?"Atualizar Tutor":"Salvar Tutor"]}),e.jsx("button",{type:"button",onClick:()=>i("/"),className:"px-6 py-2.5 border border-gray-300 text-gray-700 font-semibold rounded-lg hover:bg-gray-50 transition-colors",children:"Cancelar"})]})]})]})]})}export{Z as default};
